<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>pako gzip / ungzip フォーム</title>
  <link rel="stylesheet" href="/elibrary-api/css/457b9ec1-de6e-5f41-f1e4-6e246c83c895.min.css"/>
</head>
<body>
  <h1>gzip&ungzipフォーム</h1>
  <p class="muted">テキストを圧縮してBase64 表示<br/>ダウンロード、または.gzファイルを読み込んで展開できます</p>
  <div class="panel">
    <label for="inputText">入力テキスト（圧縮する）</label>
    <textarea id="inputText" placeholder="ここに圧縮したいテキストを入れてください">Hello Hello Hello — Hello Hello Hello</textarea>
    <div class="row" style="margin-top:8px">
      <div class="col controls">
        <button id="btnGzip">gzip 圧縮 → Base64 表示</button>
        <button id="btnGzipDownload">gzip 圧縮 → .gz ダウンロード</button>
        <label style="align-self:center;" class="small muted">圧縮レベル:</label>
        <select id="level">
          <option value="6">6 (デフォルト)</option>
          <option value="1">1 (速い, 圧縮低)</option>
          <option value="9">9 (遅い, 圧縮高)</option>
        </select>
      </div>
      <div class="col">
        <div class="small">入力サイズ: <span id="inputSize">0</span> bytes</div>
        <div class="small">圧縮サイズ: <span id="compressedSize">-</span></div>
      </div>
    </div>

    <div style="margin-top:12px">
      <label for="outBase64">圧縮結果（Base64）</label>
      <textarea id="outBase64" placeholder="ここに Base64 が出ます" readonly></textarea>
    </div>
  </div>

  <div class="panel">
    <label for="gzipFile">.gz ファイルを読み込む（展開する）</label>
    <input type="file" id="gzipFile" accept=".gz,application/gzip" />
    <div class="row" style="margin-top:8px">
      <button id="btnUngzipFile">読み込んだ .gz を展開</button>
      <button id="btnUngzipFromBase64">Base64 から展開</button>
    </div>

    <div style="margin-top:12px">
      <label for="outText">展開結果（テキスト）</label>
      <textarea id="outText" readonly placeholder="ここに展開したテキストが表示されます"></textarea>
    </div>
  </div>

  <div class="panel small">
    <strong>注意</strong>
    <ul>
      <li>ブラウザでの圧縮はクライアント側で実行されます。</li>
      <li>大量の巨大データはメモリ消費が増えるため注意してください。</li>
    </ul>
  </div>

  <!-- pako を CDN で読み込む -->
  <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>
  <script src="/elibrary-api/js/5f81ea27-14d0-b9ae-d863-2080dde70538.min.js"></script>
</body>
</html>
